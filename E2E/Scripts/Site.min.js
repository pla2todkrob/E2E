async function reloadCount(){const n=$("#nav_service").load(`${baseUrl}/Configurations/_NavService`),t=$("#nav_department").load(`${baseUrl}/Configurations/_NavDepartment`),i=$("#nav_Newtopic").load(`${baseUrl}/Topics/_Newtopic`),r=$("._reloadCountA").load(`${baseUrl}/Topics/_SortTopicAnnounce`),u=$("._reloadCountN").load(`${baseUrl}/Topics/_SortTopicNew`);await Promise.all([n,t,i,r,u])}async function callSpin(n){const t=await document.getElementById("objSpin"),i=await new Spinner({lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",className:"spinner",position:"fixed"}).spin(t);n?(document.querySelector("body").classList.add("disabled"),t.appendChild(i.el)):(document.querySelector("body").classList.remove("disabled"),$(t).empty())}function getQueryString(){if(window.location.search==="")return"{}";let t=window.location.search.substring(1).split("&"),n={};return t.forEach(function(t){t!==""&&(pair=t.split("="),n[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]))}),JSON.stringify(n)}function getQueryStringName(n){const i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=i.find(t=>t.split("=")[0]===n);return t?t.split("=")[1]:"empty"}function clearQueryString(){history.pushState({},null,location.href.split("?")[0]);location.reload()}async function createDataTable(n,t){return await $(n).DataTable(t)}async function callTable(n,t=false,i=false,r=[],u="#datalist"){const f=n+"?filter="+getQueryString();try{const o=await $.ajax({url:f,method:"GET"});$(u).html(o);$(u).find("select").each(function(){$(this).select2({theme:"bootstrap4",width:"100%"})});let e=[],n={};t&&$.each(r,function(t,i){n={};n.targets=i;n.type="date";e.push(n)});i&&(n={},n.targets=0,n.orderable=!1,e.push(n));$(u).find("table").each(async function(n,u){t||i?await createDataTable(u,{columnDefs:e,order:[[r[0],"desc"]],scrollX:!0}):await createDataTable(u,{scrollX:!0})})}catch(e){console.error(e)}}async function callTable_NoSort(n,t=false,i=[],r="#datalist"){const u=n+"?filter="+getQueryString();try{const f=await $.ajax({url:u,method:"GET"});$(r).html(f);$(r).find("select").each(function(){$(this).select2({theme:"bootstrap4",width:"100%"})});let n;$(r).find("table").each(async function(r,u){if(t){let r=[],t={};$.each(i,function(n,i){t={};t.targets=i;t.type="date";r.push(t)});n=await createDataTable(u,{columnDefs:r,ordering:!1,scrollX:!0})}else n=await createDataTable(u,{ordering:!1,scrollX:!0})})}catch(f){console.error(f)}}async function callFilter(n,t="#filter"){try{const r=await fetch(`${n}?filter=${getQueryString()}`,{method:"GET"});if(!r.ok)throw new Error(`Failed to fetch data, status code: ${r.status}`);const u=await r.text(),i=document.querySelector(t);i.innerHTML=u;i.style.display="block";i.style.opacity=0;i.style.transition="opacity 500ms";i.style.opacity=1;const f=i.querySelectorAll("select");for(const n of f)n.style.width="100%"}catch(i){console.error(i)}}async function setTable_File(n,t=false,i=false){return table=await $(n).DataTable({ordering:t,searching:i})}async function setDropdown_Form(){return $("form").find("select").each(function(){$(this).select2({theme:"bootstrap4",width:"100%"})})}async function callModal(n,t={bigSize:false,callback:null}){try{const i=await $.ajax({url:n,"async":!0});t.bigSize?$("#modalContent").parent().addClass("modal-lg"):$("#modalContent").parent().removeClass("modal-lg");$("#modalContent").html(i);$("#modalContent").find("select").each(function(){$(this).select2({theme:"bootstrap4",width:"100%"})});t.callback&&t.callback();$("#modalArea").modal("show")}catch(i){console.error(i)}}async function callSubmitModal(n,t){try{const i=await swal({title:"Are you sure?",text:"This information will be saved to the database.",buttons:!0,icon:"warning"});if(i){const r=new FormData(t),u=await fetch(n,{method:"POST",body:r}),i=await u.json();await swal({title:i.Title,text:i.Text,icon:i.Icon,button:i.Button,dangerMode:i.DangerMode});i.Icon==="success"&&($("#modalArea").modal("hide"),await reloadCount(),reloadTable())}}catch(i){console.error(i);swal({title:"Error",text:"An error occured while submitting the form.",icon:"error"})}}async function callSubmitPage(n,t){try{const i=await swal({title:"Are you sure?",text:"This information will be saved to the database.",buttons:!0,icon:"warning"});if(i){const r=new FormData(t),u=await fetch(n,{method:"POST",body:r}),i=await u.json();await swal({title:i.Title,text:i.Text,icon:i.Icon,button:i.Button,dangerMode:i.DangerMode});i.Icon==="success"&&window.location.reload()}}catch(i){console.error(i);swal({title:"Error",text:"An error occured while submitting the form.",icon:"error"})}}async function callSubmitRedirect(n,t,i){try{const r=await swal({title:"Are you sure?",text:"This information will be saved to the database.",buttons:!0,icon:"warning"});if(r){const u=new FormData(t),f=await fetch(n,{method:"POST",body:u}),r=await f.json();await swal({title:r.Title,text:r.Text,icon:r.Icon,button:r.Button,dangerMode:r.DangerMode});r.Icon==="success"&&(r.Option!=null&&(i+="/"+r.Option),window.location.href=i)}}catch(r){console.error(r);swal({title:"Error",text:"An error occured while submitting the form.",icon:"error"})}}async function callDeleteItem(n,t=false){try{const i=await swal({title:"Are you sure?",text:"Once you delete this information, you cannot recover it.",icon:"warning",buttons:!0,dangerMode:!0});if(i){const r=await fetch(n,{method:"DELETE"}),i=await r.json();await swal({title:i.Title,text:i.Text,icon:i.Icon,button:i.Button,dangerMode:i.DangerMode});i.Icon==="success"&&($("#modalArea").modal("hide"),t?location.reload():reloadTable())}}catch(i){console.error(i);swal({title:"Error",text:"An error occured while deleting the item.",icon:"error"})}}async function notifySignout(n){return swal({title:"Are you sure?",text:"Signout",icon:"warning",buttons:!0,dangerMode:!0}).then(t=>{t&&(location.href=n)})}async function getSelectOp(n,t,i){const r=$(i);r.empty();try{const i=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});if(!i.ok)throw new Error(`Request failed with status code ${i.status}`);const u=await i.json();appendOptions(r,u)}catch(u){console.error(u)}}function appendOptions(n,t){t.forEach(t=>{n.append(new Option(t.Text,t.Value))})}async function confirmAndPerformAjaxRequest(n,t,i={urlRedirect:"",isDangerous:false}){warningConfirm.dangerMode=i.isDangerous;const r=await swal(warningConfirm);if(r)try{const r=await $.ajax({url:n,"async":!0});if(swal({title:r.Title,text:r.Text,icon:r.Icon,button:r.Button,dangerMode:r.DangerMode}),r.Icon==="success")switch(t){case"reloadPage":location.reload();break;case"reloadTable":reloadTable();break;case"redirect":window.location.href=i.urlRedirect;break;default:console.log("Invalid Action type")}}catch(u){console.error(u)}}async function callDeleteIMG_SC(n){return swal({title:"Are you sure?",text:"Once you delete this information, you cannot recover it.",icon:"warning",buttons:!0,dangerMode:!0}).then(t=>{t&&$.ajax({url:n,"async":!0,success:function(n){swal({title:n.Title,text:n.Text,icon:n.Icon,button:n.Button,dangerMode:n.DangerMode}).then(function(){if(n.Icon=="success"){const t=n.Option;$("#MediaSC").empty();$("#"+t).empty()}})}})})}function scrollFunction(){let n=document.documentElement.scrollHeight-window.innerHeight;n=n/5;let t=window.pageYOffset;eleNav.style.top=t>lastScrollTop?`-${eleNav.offsetHeight}px`:"0";topButton.style.display=t>n?"block":"none";lastScrollTop=t}function debounce(n,t){let i;return function(){clearTimeout(i);i=setTimeout(n,t)}}async function topFunction(){await window.scrollTo({top:0,behavior:"smooth"})}const baseUrl="";let chat;$(function(){let n=!0;const t=window.location.pathname,i=new RegExp(t.replace(/\/$/,"")+"$"),r=$("#navbar_top"),u=r.find("ul.navbar-nav");u.each(function(){$(this).find("li.nav-item a").each(function(){n&&i.test(this.href.replace(/\/$/,""))&&($(this).addClass("active"),n=!1)})});$('a[data-toggle="tab"]').on("shown.bs.tab",function(){$($.fn.dataTable.tables(!0)).DataTable().columns.adjust()});$('a[data-toggle="pill"]').on("shown.bs.tab",function(){$($.fn.dataTable.tables(!0)).DataTable().columns.adjust()});reloadCount().then(function(){scrollFunction()})});$(document).ajaxStart(function(){callSpin(!0)}).ajaxStop(function(){callSpin(!1)});const warningConfirm={title:"Are you sure?",text:"If is confirmed, it cannot be reversed.",icon:"warning",buttons:!0,dangerMode:!1};let lastScrollTop=window.pageYOffset;const eleNav=document.querySelector("nav.navbar"),topButton=document.getElementById("btnToTop");window.addEventListener("scroll",debounce(scrollFunction,50));